import{u as x,j as s}from"./index.BVSIaKru.js";import{r as a}from"./index.BL7xzsR_.js";function k(){const[y,r]=x(["username","password","secret_key"]),[i,h]=a.useState(""),[l,m]=a.useState(""),[c,f]=a.useState(null),[t,d]=a.useState(!1),[p,o]=a.useState(null),g=async()=>{if(!i||!l||!c){alert("Por favor, complete todos los campos.");return}d(!0),o(null);const e=new FormData;e.append("file",c);try{const n=await fetch("http://127.0.0.1:8000/get-secret-key",{method:"POST",body:e}),u=await n.json();n.ok?(r("username",i,{path:"/"}),r("password",l,{path:"/"}),r("secret_key",u.secret_key,{path:"/"}),window.location.href="/"):o("Error obteniendo la secret key: "+u.detail)}catch{o("Error al comunicarse con el servidor.")}finally{d(!1)}};return s.jsxs("div",{className:"container",children:[s.jsx("h1",{children:"Login"}),s.jsx("input",{type:"text",placeholder:"Username",onChange:e=>h(e.target.value),disabled:t}),s.jsx("input",{type:"password",placeholder:"Password",onChange:e=>m(e.target.value),disabled:t}),s.jsx("input",{type:"file",accept:"image/*",onChange:e=>f(e.target.files[0]),disabled:t}),t?s.jsx("p",{children:"Espera mientras se verifica tu QR..."}):s.jsx("button",{onClick:g,disabled:t,children:"Login"}),p&&s.jsx("p",{className:"error",children:p})]})}export{k as default};
